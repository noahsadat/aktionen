<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <title>Aktionstitel Generator</title>
</head>
<body>
    <div class="container my-5 shadow-lg p-3 mb-5 bg-body rounded">
        <h5>Wie lautet Ihre Aktionstitel?</h5>
        <form id="titleForm" class="row g-3 needs-validation" novalidate>
            <div class="col-md-4">
                <label for="deTitle" class="form-label">Aktionstitel (Deutsch):</label>
                <input type="text" class="form-control" id="deTitle" name="deTitle" required>
                <div class="invalid-feedback">
                    Bitte geben Sie den Titel ein.
                </div>
            </div>
            <div class="col-md-4">
                <label for="frTitle" class="form-label">Aktionstitel (Französisch):</label>
                <input type="text" class="form-control" id="frTitle" name="frTitle" required>
                <div class="invalid-feedback">
                    Bitte geben Sie den Titel ein.
                </div>
            </div>
            <div class="col-md-4">
                <label for="nlTitle" class="form-label">Aktionstitel (Niederländisch):</label>
                <input type="text" class="form-control" id="nlTitle" name="nlTitle" required>
                <div class="invalid-feedback">
                    Bitte geben Sie den Titel ein.
                </div>
            </div>
            <div class="col-12">
                <label class="form-label h5">Aktionsszeitraum</label>
            </div>
            <div class="col-md-3">
                <label for="startDate" class="form-label">von:</label>
                <input type="text" class="form-control datepicker" id="startDate" required>
                <div class="invalid-feedback">
                    Bitte geben Sie ein Startdatum ein.
                </div>
            </div>
            <div class="col-md-3">
                <label for="endDate" class="form-label">bis:</label>
                <input type="text" class="form-control datepicker" id="endDate" required>
                <div class="invalid-feedback">
                    Bitte geben Sie ein Enddatum ein.
                </div>
            </div>
    
            <div class="col-12">
                <label class="form-label h5">Ist die Aktion ausgeschlossen von Kategorien oder Marken?</label>
                <div class="btn-group" role="group" aria-label="Exclusion options">
                    <button type="button" class="btn btn-outline-secondary exclusion-option" onclick="updateExclusions('nein')">Nein</button>
                    <button type="button" class="btn btn-outline-secondary exclusion-option" onclick="updateExclusions('Elektrowerkzeuge')">Akku- und Elektrowerkzeuge</button>
                    <button type="button" class="btn btn-outline-secondary exclusion-option" onclick="updateExclusions('Schweißgeräte')">Schweißgeräte</button>
                    <button type="button" class="btn btn-outline-secondary exclusion-option" onclick="updateExclusions('Schweißrauchabsauganlagen')">Schweißrauchabsauganlagen</button>
                    <button type="button" class="btn btn-outline-secondary exclusion-option" onclick="updateExclusions('Beleuchtung')">Beleuchtung</button>
                    <button type="button" class="btn btn-outline-secondary exclusion-option" onclick="updateExclusions('Plasma-Anlagen')">Plasma-Anlagen</button>
                    <button type="button" class="btn btn-outline-secondary exclusion-option" onclick="updateExclusions('Spotter')">Spotter</button>
                    <button type="button" class="btn btn-outline-secondary exclusion-option" onclick="updateExclusions('Induktionsgeräte')">Induktionsgeräte</button>
                </div><br>
                <div class="btn-group mt-3" role="group" aria-label="Exclusion options">
                    <button type="button" class="btn btn-outline-secondary exclusion-option" onclick="updateExclusions('Kerbe')">Kerbel</button>
                    <button type="button" class="btn btn-outline-secondary exclusion-option" onclick="updateExclusions('Milwaukee')">Milwaukee</button>
                    <button type="button" class="btn btn-outline-secondary exclusion-option" onclick="updateExclusions('DeWalt')">DeWALT</button>
                    <button type="button" class="btn btn-outline-secondary exclusion-option" onclick="updateExclusions('Gambit')">Gambit</button>
                    <button type="button" class="btn btn-outline-secondary exclusion-option" onclick="updateExclusions('tprosafe')">tprosafe</button>
                </div>
            </div>
            <div class="col-12">
                <label class="form-label h5">Ist die Aktion kombinierbar?</label><br>
                <button type="button" class="btn btn-outline-secondary" onclick="updateCombinability(false)">Nicht kombinierbar</button>
                <button type="button" class="btn btn-outline-secondary" onclick="updateCombinability(true)">Kombinierbar</button>
            </div>
        </form>
        <div id="result" class="mt-3"></div>
    </div>
    





    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
<script>
    $(document).ready(function() {
        // Initialisiert das Datepicker-Widget für die Datumsfelder
        $('.datepicker').datepicker({
            format: 'dd.mm.yyyy',
            autoclose: true
        });
    });

    let exclusions = [];
    let isCombinable = true; // Standardmäßig ist die Aktion kombinierbar

    function updateExclusions(selected) {
        // Verwaltet die Liste der Ausschlüsse basierend auf Benutzerinteraktion
        const index = exclusions.indexOf(selected);
        if (selected === 'nein') {
            exclusions = (index === -1) ? ['nein'] : [];
        } else {
            if (exclusions.includes('nein')) {
                exclusions = [];
            }
            if (index === -1) {
                exclusions.push(selected);
            } else {
                exclusions.splice(index, 1);
            }
        }
        updateButtons();
        processTitles();
    }

    function updateButtons() {
        // Aktualisiert die Zustände der Buttons basierend auf aktuellen Ausschlüssen
        document.querySelectorAll('.exclusion-option').forEach(button => {
            if (exclusions.length === 1 && exclusions[0] === 'nein') {
                button.disabled = button.textContent !== 'Nein';
            } else {
                button.disabled = false;
            }
        });
    }

    function updateCombinability(combinable) {
        // Aktualisiert die Kombinierbarkeit der Aktion
        isCombinable = combinable;
        processTitles();
    }

    function processTitles() {
        // Generiert die Ausgabetexte basierend auf den aktuellen Daten und Einstellungen
        const deTitle = document.getElementById('deTitle').value;
        const frTitle = document.getElementById('frTitle').value;
        const nlTitle = document.getElementById('nlTitle').value;
        const startDate = document.getElementById('startDate').value;
        const endDate = document.getElementById('endDate').value;

        let exclusionTextDe = exclusions.length === 0 || exclusions[0] === 'nein' ? "Nur solange der Vorrat reicht. Zzgl. gesetzlicher MwSt. Dieser Aktion gilt nur für ausgewählte Artikel. Ausgenommen sind vertraglich verhandelte Preise." : 
                              `Nur solange der Vorrat reicht. Zzgl. gesetzlicher MwSt. Dieser Aktion gilt nur für ausgewählte Artikel. Ausgenommen sind vertraglich verhandelte Preise. Ausgeschlossen sind Artikel aus der Kategorie/Marke: ${exclusions.join(', ')}.`;
        let exclusionTextFr = exclusions.length === 0 || exclusions[0] === 'nein' ? "Dans la limite des stocks disponibles. Les prix ne comprennent pas la TVA. Cette promotion ne s'applique qu'aux articles sélectionnés. Les prix convenus contractuellement sont exclus." : 
                              `Dans la limite des stocks disponibles. Les prix ne comprennent pas la TVA. Cette promotion ne s'applique qu'aux articles sélectionnés. Les prix convenus contractuellement sont exclus. Sont exclus les articles de la catégorie/marque: ${exclusions.join(', ')}.`;
        let exclusionTextNl = exclusions.length === 0 || exclusions[0] === 'nein' ? "Alleen zolang de voorraad strekt. Prijzen exclusief btw. Deze actie geldt alleen voor geselecteerde artikelen. Contractueel overeengekomen prijzen zijn uitgesloten." : 
                              `Alleen zolang de voorraad strekt. Prijzen exclusief btw. Deze actie geldt alleen voor geselecteerde artikelen. Contractueel overeengekomen prijzen zijn uitgesloten. Uitgesloten zijn artikelen uit de categorie/merk: ${exclusions.join(', ')}.`;

        let combinabilityTextDe = !isCombinable ? " Dieser Aktion ist nicht kombinierbar mit anderen Aktionen." : "";
        let combinabilityTextFr = !isCombinable ? " Cette promotion n'est pas cumulable avec d'autres promotions." : "";
        let combinabilityTextNl = !isCombinable ? " Deze actie is niet combineerbaar met andere acties." : "";

        document.getElementById('result').innerHTML = `<div class="alert alert-success">
            <strong>Deutsch:</strong><br> Aktionstitel: ${deTitle}<br>
            Aktionszeitraum: Diese Aktion ist gültig vom ${startDate} bis zum ${endDate}<br>
            Aktionsregeln: ${exclusionTextDe}${combinabilityTextDe}
        </div>
        <div class="alert alert-success">
            <strong>Französisch:</strong><br> Aktionstitel: ${frTitle}<br>
            Aktionszeitraum: Promotion valable du ${startDate} au ${endDate}<br>
            Aktionsregeln: ${exclusionTextFr}${combinabilityTextFr}
        </div>
        <div class="alert alert-success">
            <strong>Niederländisch:</strong><br> Aktionstitel: ${nlTitle}<br>
            Aktionszeitraum: Actie geldig van ${startDate} tot en mit ${endDate}<br>
            Aktionsregeln: ${exclusionTextNl}${combinabilityTextNl}
        </div>
        <button type="button" class="btn btn-primary" onclick="copyToClipboard()">Kopieren</button>
        <button type="button" class="btn btn-secondary" onclick="resetForm()">Zurücksetzen</button>
`;
    }
    
    function resetForm() {
    document.getElementById('titleForm').reset();
    exclusions = [];
    document.querySelectorAll('.exclusion-option').forEach(button => {
        button.disabled = false; // Re-enable all buttons
    });
    document.getElementById('result').innerHTML = '';
}
function copyToClipboard() {
    const resultElement = document.getElementById('result');
    const textToCopy = Array.from(resultElement.querySelectorAll('.alert')).map(alert => alert.innerText).join('\n\n');

    // Use a temporary textarea to facilitate copying
    const textarea = document.createElement('textarea');
    textarea.textContent = textToCopy;
    textarea.style.position = 'fixed';  // Prevents scrolling to bottom
    document.body.appendChild(textarea);
    textarea.select();

    try {
        document.execCommand('copy');
        alert('Text kopiert!');
    } catch (err) {
        console.error('Fehler beim Kopieren des Textes: ', err);
    }

    document.body.removeChild(textarea);
}


</script>





    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>